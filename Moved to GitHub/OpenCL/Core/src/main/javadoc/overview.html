<html>
<body>

<p>
<a href="http://javacl.googlecode.com/">JavaCL</a> is an Object-Oriented API that wraps the <a href="http://www.khronos.org/opencl/">OpenCL API</a>.<br/>
It makes it easy to do cross-platform GPGPU with Java.
</p>

<p>
Core classes :
<ul>
<li><b>JavaCL</b>: entry point of JavaCL, useful to list platforms, create contexts.
</li><li><b>CLContext</b>: all the JavaCL data and programs must be created from a context instance.
</li><li><b>CLQueue</b>: OpenCL operations can be executed immediately or queued. A queue instance is however needed even for immediate operations.
</li><li><b>CLMem</b>: base class for buffers and 2D and 3D images. 
</li>
</p>

<p>
JavaCL relies on <a href="http://nativelibs4java.sourceforge.net/sites/opencl4java/apidocs/">OpenCL4Java</a>, low-level bindings that closely match the OpenCL C API and use <a href="http://jna.dev.java.net">JNA</a>+<a href="http://jnaerator.googlecode.com">JNAerator</a> for the native access interop.
</p>

<p>
Here's a very simple vector addition JavaCL program :
<pre><font color="#000000"><font color="#009966"><strong>package</strong></font> com.nativelibs4java.opencl.demos.vectoradd;
<font color="#009966"><strong>import</strong></font> com.nativelibs4java.opencl.*;
<font color="#009966"><strong>import</strong></font> java.nio.*;

<font color="#006699"><strong>public</strong></font> <font color="#0099ff"><strong>class</strong></font> VectorAdd <font color="#000000"><strong>{</strong></font>

    <font color="#006699"><strong>public</strong></font> <font color="#006699"><strong>static</strong></font> <font color="#0099ff"><strong>void</strong></font> <font color="#9966ff">main</font><font color="#000000"><strong>(</strong></font>String[] args<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
        <font color="#006699"><strong>try</strong></font> <font color="#000000"><strong>{</strong></font>
            FloatBuffer a <font color="#000000"><strong>=</strong></font> FloatBuffer.<font color="#9966ff">wrap</font><font color="#000000"><strong>(</strong></font><font color="#006699"><strong>new</strong></font> <font color="#0099ff"><strong>float</strong></font>[] <font color="#000000"><strong>{</strong></font>  <font color="#ff0000">1</font>,  <font color="#ff0000">2</font>,  <font color="#ff0000">3</font>,  <font color="#ff0000">4</font> <font color="#000000"><strong>}</strong></font><font color="#000000"><strong>)</strong></font>;
            FloatBuffer b <font color="#000000"><strong>=</strong></font> FloatBuffer.<font color="#9966ff">wrap</font><font color="#000000"><strong>(</strong></font><font color="#006699"><strong>new</strong></font> <font color="#0099ff"><strong>float</strong></font>[] <font color="#000000"><strong>{</strong></font> <font color="#ff0000">10</font>, <font color="#ff0000">20</font>, <font color="#ff0000">30</font>, <font color="#ff0000">40</font> <font color="#000000"><strong>}</strong></font><font color="#000000"><strong>)</strong></font>;

            FloatBuffer sum <font color="#000000"><strong>=</strong></font> <font color="#9966ff">add</font><font color="#000000"><strong>(</strong></font>a, b<font color="#000000"><strong>)</strong></font>;
            <font color="#006699"><strong>for</strong></font> <font color="#000000"><strong>(</strong></font><font color="#0099ff"><strong>int</strong></font> i <font color="#000000"><strong>=</strong></font> <font color="#ff0000">0</font>, n <font color="#000000"><strong>=</strong></font> sum.<font color="#9966ff">capacity</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>; i <font color="#000000"><strong>&lt;</strong></font> n; i<font color="#000000"><strong>+</strong></font><font color="#000000"><strong>+</strong></font><font color="#000000"><strong>)</strong></font>
                System.out.<font color="#9966ff">println</font><font color="#000000"><strong>(</strong></font>sum.<font color="#9966ff">get</font><font color="#000000"><strong>(</strong></font>i<font color="#000000"><strong>)</strong></font><font color="#000000"><strong>)</strong></font>;
        <font color="#000000"><strong>}</strong></font> <font color="#006699"><strong>catch</strong></font> <font color="#000000"><strong>(</strong></font>Exception ex<font color="#000000"><strong>)</strong></font> <font color="#000000"><strong>{</strong></font>
            ex.<font color="#9966ff">printStackTrace</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
        <font color="#000000"><strong>}</strong></font>
    <font color="#000000"><strong>}</strong></font>

    <font color="#006699"><strong>public</strong></font> <font color="#006699"><strong>static</strong></font> FloatBuffer <font color="#9966ff">add</font><font color="#000000"><strong>(</strong></font>FloatBuffer a, FloatBuffer b<font color="#000000"><strong>)</strong></font> <font color="#006699"><strong>throws</strong></font> CLBuildException <font color="#000000"><strong>{</strong></font>
        <font color="#0099ff"><strong>int</strong></font> n <font color="#000000"><strong>=</strong></font> a.<font color="#9966ff">capacity</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
        
        CLContext context <font color="#000000"><strong>=</strong></font> JavaCL.<font color="#9966ff">createBestContext</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
        CLQueue queue <font color="#000000"><strong>=</strong></font> context.<font color="#9966ff">createDefaultQueue</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
        
        String source <font color="#000000"><strong>=</strong></font> 
            <font color="#ff00cc">&quot;</font><font color="#ff00cc">__kernel</font><font color="#ff00cc"> </font><font color="#ff00cc">void</font><font color="#ff00cc"> </font><font color="#ff00cc">addFloats(__global</font><font color="#ff00cc"> </font><font color="#ff00cc">const</font><font color="#ff00cc"> </font><font color="#ff00cc">float*</font><font color="#ff00cc"> </font><font color="#ff00cc">a,</font><font color="#ff00cc"> </font><font color="#ff00cc">__global</font><font color="#ff00cc"> </font><font color="#ff00cc">const</font><font color="#ff00cc"> </font><font color="#ff00cc">float*</font><font color="#ff00cc"> </font><font color="#ff00cc">b,</font><font color="#ff00cc"> </font><font color="#ff00cc">__global</font><font color="#ff00cc"> </font><font color="#ff00cc">float*</font><font color="#ff00cc"> </font><font color="#ff00cc">output)</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font>
            <font color="#ff00cc">&quot;</font><font color="#ff00cc">{</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font>
            <font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">int</font><font color="#ff00cc"> </font><font color="#ff00cc">i</font><font color="#ff00cc"> </font><font color="#ff00cc">=</font><font color="#ff00cc"> </font><font color="#ff00cc">get_global_id(0);</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font>
            <font color="#ff00cc">&quot;</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">output[i]</font><font color="#ff00cc"> </font><font color="#ff00cc">=</font><font color="#ff00cc"> </font><font color="#ff00cc">a[i]</font><font color="#ff00cc"> </font><font color="#ff00cc">+</font><font color="#ff00cc"> </font><font color="#ff00cc">b[i];</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font> <font color="#000000"><strong>+</strong></font>
            <font color="#ff00cc">&quot;</font><font color="#ff00cc">}</font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc"> </font><font color="#ff00cc">&quot;</font>;
        
        CLKernel kernel <font color="#000000"><strong>=</strong></font> context.<font color="#9966ff">createProgram</font><font color="#000000"><strong>(</strong></font>source<font color="#000000"><strong>)</strong></font>.<font color="#9966ff">createKernel</font><font color="#000000"><strong>(</strong></font><font color="#ff00cc">&quot;</font><font color="#ff00cc">addFloats</font><font color="#ff00cc">&quot;</font><font color="#000000"><strong>)</strong></font>;
        CLFloatBuffer aBuf <font color="#000000"><strong>=</strong></font> context.<font color="#9966ff">createFloatBuffer</font><font color="#000000"><strong>(</strong></font>CLMem.Usage.Input, a, <font color="#cc00cc">true</font><font color="#000000"><strong>)</strong></font>;
        CLFloatBuffer bBuf <font color="#000000"><strong>=</strong></font> context.<font color="#9966ff">createFloatBuffer</font><font color="#000000"><strong>(</strong></font>CLMem.Usage.Input, b, <font color="#cc00cc">true</font><font color="#000000"><strong>)</strong></font>;
        CLFloatBuffer outBuf <font color="#000000"><strong>=</strong></font> context.<font color="#9966ff">createFloatBuffer</font><font color="#000000"><strong>(</strong></font>CLMem.Usage.Output, n<font color="#000000"><strong>)</strong></font>;
        kernel.<font color="#9966ff">setArgs</font><font color="#000000"><strong>(</strong></font>aBuf, bBuf, outBuf<font color="#000000"><strong>)</strong></font>;
        
        kernel.<font color="#9966ff">enqueueNDRange</font><font color="#000000"><strong>(</strong></font>queue, <font color="#006699"><strong>new</strong></font> <font color="#0099ff"><strong>int</strong></font>[]<font color="#000000"><strong>{</strong></font>n<font color="#000000"><strong>}</strong></font>, <font color="#006699"><strong>new</strong></font> <font color="#0099ff"><strong>int</strong></font>[] <font color="#000000"><strong>{</strong></font> <font color="#ff0000">1</font> <font color="#000000"><strong>}</strong></font><font color="#000000"><strong>)</strong></font>;
        queue.<font color="#9966ff">finish</font><font color="#000000"><strong>(</strong></font><font color="#000000"><strong>)</strong></font>;
    
        <font color="#006699"><strong>return</strong></font> outBuf.<font color="#9966ff">read</font><font color="#000000"><strong>(</strong></font>queue<font color="#000000"><strong>)</strong></font>;
    <font color="#000000"><strong>}</strong></font>
<font color="#000000"><strong>}</strong></font>

</font></pre>

</p>

</body>
</html>
